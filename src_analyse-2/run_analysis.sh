#!/bin/bash

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
GREEN='\033[0;32m'
CYAN='\033[0;36m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${CYAN}üöÄ –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ —Ç–æ–∫–µ–Ω–æ–≤${NC}"

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo -e "${CYAN}üîß –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è...${NC}"
if [ -f "../raket-2/venv/bin/activate" ]; then
    source ../raket-2/venv/bin/activate
    echo -e "${GREEN}‚úì –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ${NC}"
else
    echo -e "${YELLOW}‚ö†Ô∏è –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ${NC}"
    echo -e "${YELLOW}–ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è...${NC}"
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ reports
if [ -d "reports" ]; then
    echo -e "${CYAN}üóëÔ∏è  –û—á–∏—Å—Ç–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ reports...${NC}"
    rm -rf reports/*
    echo -e "${GREEN}‚úÖ –ö–∞—Ç–∞–ª–æ–≥ reports –æ—á–∏—â–µ–Ω${NC}"
else
    echo -e "${CYAN}üìÅ –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ reports...${NC}"
    mkdir reports
    echo -e "${GREEN}‚úÖ –ö–∞—Ç–∞–ª–æ–≥ reports —Å–æ–∑–¥–∞–Ω${NC}"
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∞–ª–∏–∑
echo -e "${CYAN}üìä –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞...${NC}"
python3 src/main.py --analyze tokens/Final/final.json

echo -e "\n${GREEN}‚ú® –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω${NC}"
echo -e "${CYAN}üìÇ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ reports${NC}" 